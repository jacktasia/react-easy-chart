{"version":3,"sources":["../modules/shared.js"],"names":[],"mappings":";;;;;;;;;;;QAgGgB,M,GAAA,M;QAQA,oB,GAAA,oB;QAUA,mB,GAAA,mB;QAkBA,a,GAAA,a;QA4BA,c,GAAA,c;QAIA,e,GAAA,e;QAYA,e,GAAA,e;QAmBA,oB,GAAA,oB;QAOA,0B,GAAA,0B;;AA1MhB;;AACA;;AACA;;AACA;;;;;;AAEO,IAAM,wCAAgB,CAC3B,SAD2B,EAE3B,SAF2B,EAG3B,SAH2B,EAI3B,SAJ2B,CAAtB;;AAOA,IAAM,wCAAgB;AAC3B,sBAAoB;AAClB,YAAQ,MADU;AAElB,iBAAa,CAFK;AAGlB,aAAS;AAHS,GADO;AAM3B,4BAA0B;AACxB,aAAS;AADe,GANC;AAS3B,sBAAoB;AAClB,gBAAY,YADM;AAElB,cAAU,MAFQ;AAGlB,gBAAY,QAHM;AAIlB,UAAM;AAJY,GATO;AAe3B,UAAQ;AACN,UAAM,MADA;AAEN,gBAAY,2EAFN;AAGN,aAAS;AAHH,GAfmB;AAoB3B,gBAAc;AACZ,aAAS;AADG,GApBa;AAuB3B,WAAS;AACP,UAAM,MADC;AAEP,iBAAa,GAFN;AAGP,aAAS;AAHF,GAvBkB;AA4B3B,iBAAe;AACb,aAAS;AADI,GA5BY;AA+B3B,WAAS;AACP,aAAS;AADF,GA/BkB;AAkC3B,iBAAe;AACb,aAAS;AADI,GAlCY;AAqC3B,UAAQ;AACN,iBAAa,CADP;AAEN,aAAS,IAFH;AAGN,gBAAY;AAHN,GArCmB;AA0C3B,gBAAc;AACZ,aAAS;AADG,GA1Ca;AA6C3B,uBAAqB;AACnB,OAAG,CADgB;AAEnB,aAAS,GAFU;AAGnB,gBAAY;AAHO,GA7CM;AAkD3B,6BAA2B;AACzB,OAAG,CADsB;AAEzB,aAAS;AAFgB,GAlDA;AAsD3B,wBAAsB;AACpB,OAAG,CADiB;AAEpB,UAAM;AAFc,GAtDK;AA0D3B,2BAAyB;AACvB,QAAI;AADmB,GA1DE;AA6D3B,WAAS;AACP,mBAAe,8BADR;AAEP,iBAAa;AAFN,GA7DkB;AAiE3B,kBAAgB;AACd,UAAM;AADQ,GAjEW;AAoE3B,4BAA0B;AACxB,UAAM,MADkB;AAExB,iBAAa,CAFW;AAGxB,uBAAmB;AAHK,GApEC;AAyE3B,iBAAe;AACb,aAAS,MADI;AAEb,YAAQ;AAFK,GAzEY;AA6E3B,gBAAc;AACZ,YAAQ,WADI;AAEZ,iBAAa,CAFD;AAGZ,aAAS;AAHG;AA7Ea,CAAtB;;AAoFA,SAAS,MAAT,GAAyB;AAAA,oCAAN,IAAM;AAAN,QAAM;AAAA;;AAC9B,MAAI,OAAO,KAAK,CAAL,CAAX;AACA,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,MAAzB,EAAiC,GAAjC,EAAsC;AACpC,YAAQ,KAAK,CAAL,CAAR;AACD;AACD,SAAO,IAAP;AACD;;AAEM,SAAS,oBAAT,CAA8B,KAA9B,EAAqC,IAArC,EAA2C,SAA3C,EAAsD;AAC3D,MAAM,YACH,UAAU,GAAX,GACI,GADJ,GAEI,GAHN;AAIA,SAAQ,SAAS,MAAV,GACH,UAAC,CAAD;AAAA,WAAO,UAAU,EAAE,SAAF,CAAV,CAAP;AAAA,GADG,GAEH,UAAC,CAAD;AAAA,WAAO,EAAE,SAAF,CAAP;AAAA,GAFJ;AAGD;;AAEM,SAAS,mBAAT,CAA6B,gBAA7B,EAA+C;AACpD,iBAAO,gBAAP,EACG,MADH,CACU,KADV,EAEG,SAFH,CAEa,cAFb,EAGG,MAHH;;AAKA,MAAM,QAAQ,eAAO,gBAAP,EACX,MADW,CACJ,KADI,EAEX,SAFW,CAED,OAFC,CAAd;;AAIA,WAAS,cAAT,GAA0B;AACxB,mBAAO,IAAP,EACG,MADH,CACU,QADV,EAEG,IAFH,CAEQ,OAFR,EAEiB,aAFjB;AAGD;AACD,QAAM,IAAN,CAAW,cAAX;AACD;;AAEM,SAAS,aAAT,CAAuB,IAAvB,EAA6B,YAA7B,EAA2C,gBAA3C,EAA6D;AAClE,SAAO;AACL,8BAA0B;AACxB,YACG,YAAD,GACI,MADJ,GAEI;AAJkB,KADrB;AAOL,6BAAyB;AACvB,UACG,gBAAD,GACI,MADJ,GAEI,MAJiB;AAKvB,YACG,IAAD,GACI,MADJ,GAEI;AARiB,KAPpB;AAiBL,oBAAgB;AACd,eACG,IAAD,GACI,QADJ,GAEI,MAJQ;AAKd,cAAQ;AALM;AAjBX,GAAP;AAyBD;;AAEM,SAAS,cAAT,CAAwB,GAAxB,EAA6B;AAClC,SAAO,0BAAK,GAAL,CAAP;AACD;;AAEM,SAAS,eAAT,CAAyB,IAAzB,EAA+B,MAA/B,EAAuC,gBAAvC,EAAyD,EAAzD,EAA6D;AAClE,MAAI,MAAJ,EAAY,OAAO,MAAP;AACZ,MAAI,gBAAJ,EAAsB;AACpB,WAAQ,IAAD,GACH,EAAE,KAAK,EAAP,EAAW,OAAO,EAAlB,EAAsB,QAAQ,EAA9B,EAAkC,MAAO,EAAD,GAAO,EAAP,GAAY,EAApD,EADG,GAEH,EAAE,KAAK,CAAP,EAAU,OAAO,CAAjB,EAAoB,QAAQ,CAA5B,EAA+B,MAAM,CAArC,EAFJ;AAGD;AACD,SAAQ,IAAD,GACH,EAAE,KAAK,EAAP,EAAW,OAAQ,EAAD,GAAO,EAAP,GAAY,EAA9B,EAAkC,QAAQ,EAA1C,EAA8C,MAAM,EAApD,EADG,GAEH,EAAE,KAAK,CAAP,EAAU,OAAO,CAAjB,EAAoB,QAAQ,CAA5B,EAA+B,MAAM,CAArC,EAFJ;AAGD;;AAEM,SAAS,eAAT,CAAyB,IAAzB,EAA+B,cAA/B,EAA+C;AACpD,MAAI,WAAJ,CADoD,CAC5C;AACR,MAAI,WAAJ,CAFoD,CAE5C;AACR,OAAK,OAAL,CAAa,UAAC,IAAD,EAAU;AACrB,QAAM,cAAc,qBAAO,IAAP,EAAa,cAAb,CAApB;;AADqB,oDAEJ,WAFI;;AAAA,QAEd,EAFc;AAAA,QAEV,EAFU;;AAGrB,SAAK,KAAK,EAAL,GAAU,EAAV,GAAe,EAApB;AACA,SAAK,KAAK,EAAL,GAAU,EAAV,GAAe,EAApB;AACD,GALD;AAMA,SAAO,CAAC,EAAD,EAAK,EAAL,CAAP;AACD;;AAED,SAAS,eAAT,CAAyB,WAAzB,EAAsC,SAAtC,EAAiD;AAAA,mDAC9B,WAD8B;;AAAA,MACxC,EADwC;AAAA,MACpC,EADoC;;AAE/C,MAAM,KAAK,UAAU,EAAV,CAAX;AACA,MAAM,KAAK,UAAU,EAAV,CAAX;AACA,SAAO,CAAC,EAAD,EAAK,EAAL,CAAP;AACD;;AAEM,SAAS,oBAAT,CAA8B,WAA9B,EAA2C,IAA3C,EAAiD,SAAjD,EAA4D;AACjE,MAAI,CAAC,MAAM,OAAN,CAAc,WAAd,CAAL,EAAiC,OAAO,IAAP;AACjC,SAAQ,SAAS,MAAV,GACH,gBAAgB,WAAhB,EAA6B,SAA7B,CADG,GAEH,WAFJ;AAGD;;AAEM,SAAS,0BAAT,CAAoC,KAApC,EAA2C,WAA3C,EAAwD,IAAxD,EAA8D,IAA9D,EAAoE,MAApE,EAA4E,SAA5E,EAAuF;AAC5F,MAAM,YACH,UAAU,GAAX,GACI,GADJ,GAEI,GAHN;;AAKA,MAAI,aAAJ;;AAEA,UAAQ,IAAR;AACE,SAAK,MAAL;AACE,aAAO,0BAAP;AACA,WACG,MADH,CAEI,MAAM,OAAN,CAAc,WAAd,IACI,WADJ,CACgB;AADhB,QAEI,KAAK,CAAL,EAAQ,GAAR,CAAY,UAAC,CAAD;AAAA,eAAO,EAAE,SAAF,CAAP;AAAA,OAAZ,CAJR,EAKK,KALL,CAKW,CAAC,CAAD,EAAI,MAAJ,CALX,EAMK,OANL,CAMa,CANb;AAOA;AACF,SAAK,QAAL;AACE,aAAO,2BAAP;AACA,WACG,MADH,CAEI,MAAM,OAAN,CAAc,WAAd,IACI,WADJ,CACgB;AADhB,QAEI,gBAAgB,IAAhB,EAAsB,qBAAqB,KAArB,EAA4B,IAA5B,EAAkC,SAAlC,CAAtB,CAJR,EAKG,KALH,CAMK,UAAU,GAAX,GACI,CAAC,CAAD,EAAI,MAAJ,CADJ,GAEI,CAAC,MAAD,EAAS,CAAT,CARR;AASA;AACF,SAAK,MAAL;AACE,aAAO,QAAK,KAAL,EAAP;AACA,WACG,MADH,CAEI,MAAM,OAAN,CAAc,WAAd,IACI,gBAAgB,WAAhB,EAA6B,SAA7B,CADJ,GAEI,gBAAgB,IAAhB,EAAsB,qBAAqB,KAArB,EAA4B,IAA5B,EAAkC,SAAlC,CAAtB,CAJR,EAKG,KALH,CAMK,UAAU,GAAX,GACI,CAAC,CAAD,EAAI,MAAJ,CADJ,GAEI,CAAC,MAAD,EAAS,CAAT,CARR;AASA;AACF;AACE;AApCJ;AAsCA,SAAO,IAAP;AACD","file":"shared.js","sourcesContent":["import { extent } from 'd3-array';\nimport { scaleLinear as linear, scalePoint as point } from 'd3-scale';\nimport { time, select } from 'd3';\nimport hash from 'object-hash';\n\nexport const defaultColors = [\n  '#3F4C55',\n  '#E3A51A',\n  '#F4E956',\n  '#AAAC84'\n];\n\nexport const defaultStyles = {\n  '.pie-chart-slice': {\n    stroke: '#fff',\n    strokeWidth: 1,\n    opacity: '1'\n  },\n  '.pie-chart-slice:hover': {\n    opacity: '0.8'\n  },\n  '.pie-chart-label': {\n    fontFamily: 'sans-serif',\n    fontSize: '12px',\n    textAnchor: 'middle',\n    fill: '#000'\n  },\n  '.bar': {\n    fill: 'blue',\n    transition: 'x 0.35s ease-in, y 0.35s ease-in, height 0.5s ease-in, width 0.5s ease-in',\n    opacity: 1\n  },\n  '.bar:hover': {\n    opacity: 0.8\n  },\n  '.line': {\n    fill: 'none',\n    strokeWidth: 1.5,\n    opacity: 0.7\n  },\n  '.line:hover': {\n    opacity: 1\n  },\n  '.area': {\n    opacity: 0.7\n  },\n  '.area:hover': {\n    opacity: 1\n  },\n  '.dot': {\n    strokeWidth: 0,\n    opacity: 0.85,\n    transition: 'cx 0.35s ease-in, cy 0.35s ease-in, r 0.5s ease-in'\n  },\n  '.dot:hover': {\n    opacity: 1\n  },\n  'circle.data-point': {\n    r: 4,\n    opacity: 0.7,\n    transition: 'cx 0.35s ease-in, cy 0.35s ease-in'\n  },\n  'circle.data-point:hover': {\n    r: 6,\n    opacity: 1\n  },\n  'circle.tick-circle': {\n    r: 2,\n    fill: 'lightgrey'\n  },\n  '.x circle.tick-circle': {\n    cy: '8px'\n  },\n  '.axis': {\n    'font-family': 'dobra-light,Arial,sans-serif',\n    'font-size': '9px'\n  },\n  '.axis .label': {\n    font: '14px arial'\n  },\n  '.axis path, .axis line': {\n    fill: 'none',\n    strokeWidth: 1,\n    'shape-rendering': 'crispEdges'\n  },\n  'x.axis path': {\n    display: 'none',\n    stroke: 'lightgrey'\n  },\n  '.tick line': {\n    stroke: 'lightgrey',\n    strokeWidth: 1,\n    opacity: '0.7'\n  }\n};\n\nexport function reduce(...args) {\n  let rVal = args[0];\n  for (let i = 1; i < args.length; i++) {\n    rVal -= args[i];\n  }\n  return rVal;\n}\n\nexport function createValueGenerator(scale, type, parseDate) {\n  const dataIndex =\n    (scale === 'x')\n      ? 'x'\n      : 'y';\n  return (type === 'time')\n    ? (d) => parseDate(d[dataIndex])\n    : (d) => d[dataIndex];\n}\n\nexport function createCircularTicks(containerElement) {\n  select(containerElement)\n    .select('svg')\n    .selectAll('.tick-circle')\n    .remove();\n\n  const ticks = select(containerElement)\n    .select('svg')\n    .selectAll('.tick');\n\n  function circleAppender() {\n    select(this)\n      .append('circle')\n      .attr('class', 'tick-circle');\n  }\n  ticks.each(circleAppender);\n}\n\nexport function getAxisStyles(grid, verticalGrid, yAxisOrientRight) {\n  return {\n    '.x circle.tick-circle ': {\n      fill:\n        (verticalGrid)\n          ? 'none'\n          : 'lightgrey'\n    },\n    '.y circle.tick-circle': {\n      cx:\n        (yAxisOrientRight)\n          ? '+5px'\n          : '-8px',\n      fill:\n        (grid)\n          ? 'none'\n          : 'lightgrey'\n    },\n    '.y.axis line': {\n      display:\n        (grid)\n          ? 'inline'\n          : 'none',\n      stroke: 'lightgrey'\n    }\n  };\n}\n\nexport function createUniqueID(obj) {\n  return hash(obj);\n}\n\nexport function calculateMargin(axes, margin, yAxisOrientRight, y2) {\n  if (margin) return margin;\n  if (yAxisOrientRight) {\n    return (axes)\n      ? { top: 20, right: 50, bottom: 50, left: (y2) ? 50 : 20 }\n      : { top: 0, right: 0, bottom: 0, left: 0 };\n  }\n  return (axes)\n    ? { top: 20, right: (y2) ? 50 : 20, bottom: 50, left: 50 }\n    : { top: 0, right: 0, bottom: 0, left: 0 };\n}\n\nexport function calculateExtent(data, valueGenerator) {\n  let lo; // Low\n  let hi; // High\n  data.forEach((item) => {\n    const domainRange = extent(item, valueGenerator);\n    const [LO, HI] = domainRange;\n    lo = lo < LO ? lo : LO;\n    hi = hi > HI ? hi : HI;\n  });\n  return [lo, hi];\n}\n\nfunction timeDomainRange(domainRange, parseDate) {\n  const [LO, HI] = domainRange;\n  const lo = parseDate(LO);\n  const hi = parseDate(HI);\n  return [lo, hi];\n}\n\nexport function calculateDomainRange(domainRange, type, parseDate) {\n  if (!Array.isArray(domainRange)) return null;\n  return (type === 'time')\n    ? timeDomainRange(domainRange, parseDate)\n    : domainRange;\n}\n\nexport function createDomainRangeGenerator(scale, domainRange, data, type, length, parseDate) {\n  const dataIndex =\n    (scale === 'x')\n      ? 'x'\n      : 'y';\n\n  let axis;\n\n  switch (type) {\n    case 'text':\n      axis = point();\n      axis\n        .domain(\n          Array.isArray(domainRange)\n            ? domainRange // calculateDomainRange(domainRange, type, parseDate)\n            : data[0].map((d) => d[dataIndex]))\n          .range([0, length])\n          .padding(0);\n      break;\n    case 'linear':\n      axis = linear();\n      axis\n        .domain(\n          Array.isArray(domainRange)\n            ? domainRange // calculateDomainRange(domainRange, type, parseDate)\n            : calculateExtent(data, createValueGenerator(scale, type, parseDate)))\n        .range(\n          (scale === 'x')\n            ? [0, length]\n            : [length, 0]);\n      break;\n    case 'time':\n      axis = time.scale();\n      axis\n        .domain(\n          Array.isArray(domainRange)\n            ? timeDomainRange(domainRange, parseDate)\n            : calculateExtent(data, createValueGenerator(scale, type, parseDate)))\n        .range(\n          (scale === 'x')\n            ? [0, length]\n            : [length, 0]);\n      break;\n    default:\n      break;\n  }\n  return axis;\n}\n"]}