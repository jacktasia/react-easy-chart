{"version":3,"sources":["../modules/shared.js"],"names":[],"mappings":"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","file":"shared.js","sourcesContent":["import {extent} from 'd3-array';\nimport {linear, ordinal} from 'd3-scale';\nimport {time, select} from 'd3';\n\nexport const rmaColorPalet = ['#3F4C55', '#E3A51A', '#F4E956', '#AAAC84'];\n\nexport const defaultStyle = {\n  '.pie_chart_lines': {\n    stroke: '#fff',\n    strokeWidth: 1,\n    opacity: '1'\n  },\n  '.pie_chart_lines:hover': {\n    opacity: '0.8'\n  },\n  '.pie_chart_text': {\n    fontFamily: 'sans-serif',\n    fontSize: '12px',\n    textAnchor: 'middle',\n    fill: '#000'\n  },\n  '.bar': {\n    fill: 'blue',\n    transition: 'height 0.5s ease-in, y 0.5s ease-in',\n    opacity: 1\n  },\n  '.bar:hover': {\n    opacity: 0.8\n  },\n  '.line': {\n    fill: 'none',\n    strokeWidth: 1.5,\n    opacity: 0.7\n  },\n  '.line:hover': {\n    opacity: 1\n  },\n  '.area': {\n    opacity: 0.7\n  },\n  '.area:hover': {\n    opacity: 1\n  },\n  '.dot': {\n    strokeWidth: 0,\n    opacity: 0.85\n  },\n  '.dot:hover': {\n    opacity: 1\n  },\n  'circle.data-point': {\n    r: 4,\n    opacity: 0.7\n  },\n  'circle.data-point:hover': {\n    r: 6,\n    opacity: 1\n  },\n  'circle.tick-circle': {\n    r: 2,\n    fill: 'lightgrey'\n  },\n  '.x circle.tick-circle': {\n    cy: '8px'\n  },\n  '.axis': {\n    'font-family': 'dobra-light,Arial,sans-serif',\n    'font-size': '9px'\n  },\n  '.axis .label': {\n    font: '14px arial'\n  },\n  '.axis path,.axis line': {\n    fill: 'none',\n    strokeWidth: 1,\n    'shape-rendering': 'crispEdges'\n  },\n  'x.axis path': {\n    display: 'none',\n    stroke: 'lightgrey'\n  },\n  '.tick line': {\n    stroke: 'lightgrey',\n    strokeWidth: 1,\n    opacity: '0.7'\n  }\n};\n\nexport function reduce(x) {\n  let rVal = x;\n  for (let i = 1; i < arguments.length; i++) {\n    rVal -= arguments[i];\n  }\n  return rVal;\n}\n\nexport function getValueFunction(scale, type, dateParser) {\n  const dataIndex = scale === 'x' ? 'x' : 'y';\n  switch (type) {\n    case 'time':\n      return (d) => dateParser(d[dataIndex]);\n    default:\n      return (d) => d[dataIndex];\n  }\n}\n\nexport function createCircularTicks(containerElement) {\n  select(containerElement).select('svg').selectAll('.tick-circle').remove();\n  const ticks = select(containerElement).select('svg').selectAll('.tick');\n  function circleAppender() {\n    select(this).append('circle').attr('class', 'tick-circle');\n  }\n  ticks.each(circleAppender);\n}\n\nexport function getAxisStyles(grid, verticalGrid, yAxisOrientRight) {\n  return {\n    '.x circle.tick-circle ': {\n      fill: verticalGrid ? 'none' : 'lightgrey'\n    },\n    '.y circle.tick-circle': {\n      cx: yAxisOrientRight ? '+5px' : '-8px',\n      fill: grid ? 'none' : 'lightgrey'\n    },\n    '.y.axis line': {\n      display: grid ? 'inline' : 'none',\n      stroke: 'lightgrey'\n    }\n  };\n}\n\nexport function getRandomId() {\n  return Math.floor(Math.random() * new Date().getTime());\n}\n\nexport function calcMargin(axes, margin, yAxisOrientRight, y2:false) {\n  if (margin) return margin;\n  let defaultMargins = axes ? {top: 20, right: y2 ? 50 : 20, bottom: 50, left: 50} : {top: 0, right: 0, bottom: 0, left: 0};\n  if (yAxisOrientRight) {\n    defaultMargins = axes ? {top: 20, right: 50, bottom: 50, left: y2 ? 50 : 20} : {top: 0, right: 0, bottom: 0, left: 0};\n  }\n  return defaultMargins;\n}\n\nexport function findLargestExtent(data, valueFunction) {\n  let low;\n  let high;\n  data.map((dataElement) => {\n    const calcDomainRange = extent(dataElement, valueFunction);\n    low = low < calcDomainRange[0] ? low : calcDomainRange[0];\n    high = high > calcDomainRange[1] ? high : calcDomainRange[1];\n  });\n  return [low, high];\n}\n\nexport function calcDefaultDomain(domainRange, type, dateParser) {\n  if (!domainRange) return null;\n  switch (type) {\n    case 'time':\n      return [dateParser(domainRange[0]), dateParser(domainRange[1])];\n    default:\n      return domainRange;\n  }\n}\n\nexport function setLineDomainAndRange(scale, domainRange, data, type, length, parseDate) {\n  const dataIndex = scale === 'x' ? 'x' : 'y';\n  let d3Axis;\n  switch (type) {\n    case 'text':\n      d3Axis = ordinal();\n      d3Axis.domain(domainRange ?\n        calcDefaultDomain(domainRange, type, parseDate)\n        :\n        data[0].map((d) => d[dataIndex])\n      );\n\n      d3Axis.rangePoints([0, length], 0);\n      break;\n    case 'linear':\n      d3Axis = linear();\n      d3Axis.domain(domainRange ?\n        calcDefaultDomain(domainRange, type, parseDate)\n        :\n        findLargestExtent(data, getValueFunction(scale, type, parseDate))\n      );\n      d3Axis.range(scale === 'x' ? [0, length] : [length, 0]);\n      break;\n    case 'time':\n      d3Axis = time.scale();\n      d3Axis.domain(domainRange ?\n        calcDefaultDomain(domainRange, type, parseDate)\n        :\n        findLargestExtent(data, getValueFunction(scale, type, parseDate))\n      );\n      d3Axis.range(scale === 'x' ? [0, length] : [length, 0]);\n      break;\n    default:\n      break;\n  }\n  return d3Axis;\n}\n"]}