{"version":3,"sources":["../modules/shared.js"],"names":[],"mappings":"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","file":"shared.js","sourcesContent":["import {extent} from 'd3-array';\nimport {linear, ordinal} from 'd3-scale';\nimport {time} from 'd3';\n\nexport function reduce(x) {\n  let rVal = x;\n  for (let i = 1; i < arguments.length; i++) {\n    rVal -= arguments[i];\n  }\n  return rVal;\n}\n\nexport function getValueFunction(scale, type, dateParser) {\n  const dataIndex = scale === 'x' ? 'x' : 'y';\n  switch (type) {\n    case 'time':\n      return (d) => dateParser(d[dataIndex]);\n    default:\n      return (d) => d[dataIndex];\n  }\n}\n\nexport function getRandomId() {\n  return Math.floor(Math.random() * new Date().getTime());\n}\n\nexport function calcMargin(axes, margin, yAxisOrientRight) {\n  if (margin) return margin;\n  let defaultMargins = axes ? {top: 20, right: 20, bottom: 50, left: 50} : {top: 0, right: 0, bottom: 0, left: 0};\n  if (yAxisOrientRight) {\n    defaultMargins = axes ? {top: 20, right: 50, bottom: 50, left: 20} : {top: 0, right: 0, bottom: 0, left: 0};\n  }\n  return defaultMargins;\n}\n\nexport function findLargestExtent(data, valueFunction) {\n  let low;\n  let high;\n  data.map((dataElement) => {\n    const calcDomainRange = extent(dataElement, valueFunction);\n    low = low < calcDomainRange[0] ? low : calcDomainRange[0];\n    high = high > calcDomainRange[1] ? high : calcDomainRange[1];\n  });\n  return [low, high];\n}\n\nexport function calcDefaultDomain(domainRange, type, dateParser) {\n  if (!domainRange) return null;\n  switch (type) {\n    case 'time':\n      return [dateParser(domainRange[0]), dateParser(domainRange[1])];\n    default:\n      return domainRange;\n  }\n}\n\nexport function setLineDomainAndRange(scale, domainRange, data, type, length, parseDate) {\n  const dataIndex = scale === 'x' ? 'x' : 'y';\n  let d3Axis;\n  switch (type) {\n    case 'text':\n      d3Axis = ordinal();\n      d3Axis.domain(domainRange ?\n        calcDefaultDomain(domainRange, type, parseDate)\n        :\n        data[0].map((d) => d[dataIndex])\n      );\n\n      d3Axis.rangePoints([0, length], 0);\n      break;\n    case 'linear':\n      d3Axis = linear();\n      d3Axis.domain(domainRange ?\n        calcDefaultDomain(domainRange, type, parseDate)\n        :\n        findLargestExtent(data, getValueFunction(scale, type, parseDate))\n      );\n      d3Axis.range(scale === 'x' ? [0, length] : [length, 0]);\n      break;\n    case 'time':\n      d3Axis = time.scale();\n      d3Axis.domain(domainRange ?\n        calcDefaultDomain(domainRange, type, parseDate)\n        :\n        findLargestExtent(data, getValueFunction(scale, type, parseDate))\n      );\n      d3Axis.range(scale === 'x' ? [0, length] : [length, 0]);\n      break;\n    default:\n      break;\n  }\n  return d3Axis;\n}\n"]}